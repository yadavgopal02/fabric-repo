name: Fabric API Call

on:
  push:
    branches:
      - main

jobs:
  call_api:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Make API Call.
      env:
        FABRIC_API_TOKEN: ${{ secrets.AZURE_CREDENTIALS }}
      run: |
        # Replace 'YOUR_API_ENDPOINT' with the actual Fabric API endpoint
        # Replace 'YOUR_REQUEST_BODY' with the request body if needed
        #curl --http1.1 -X POST -H "Authorization: Bearer $FABRIC_API_TOKEN" -H "Content-Type: application/json" -d 'notebook trial' 'https://api.fabric.microsoft.com/v1/workspaces/0fde94f2-391e-42c0-bc8c-f29f17cac5f6/notebooks'
        #curl --http1.1 -H "Authorization: Bearer $FABRIC_API_TOKEN" "https://api.fabric.microsoft.com/v1/workspaces/0fde94f2-391e-42c0-bc8c-f29f17cac5f6/notebooks" | jq '.'
        #curl -X POST -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCIsImtpZCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC81NWVhNjE5Ni03MGI5LTQ0MTEtOTJmNS0wNGE1NDc5MWYxMjAvIiwiaWF0IjoxNzE1Njk4NDc4LCJuYmYiOjE3MTU2OTg0NzgsImV4cCI6MTcxNTcwMjYxNiwiYWNyIjoiMSIsImFpbyI6IkFUUUF5LzhXQUFBQVdkekpLZUd5NnpvQVR5RGxWVTh1UHVTN2lXVjNxSE92SWE0RCtGNW1iNlZnSU9kNUhzWHRxa1VIT21FWkh6Z2YiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiMTk1MGEyNTgtMjI3Yi00ZTMxLWE5Y2YtNzE3NDk1OTQ1ZmMyIiwiYXBwaWRhY3IiOiIwIiwiZmFtaWx5X25hbWUiOiJZYWRhdiIsImdpdmVuX25hbWUiOiJHb3BhbCIsImdyb3VwcyI6WyI4ODhmOTUwOS00MjdjLTQ3ZDItODlkNy0zNzQ3OGZhNmYyMDgiLCIzYTMyMDY2Ni0yYjMxLTQ1MmMtOTlmNS0zNDg5YjU4Nzc0MWYiLCI3NWFlZjliZS1hYThjLTQyOWMtYTM5ZC0xNzc5NzkxZTk3OGQiXSwiaWR0eXAiOiJ1c2VyIiwiaXBhZGRyIjoiMjQwNToyMDE6MzAxNjo4YTFjOjM0ZmQ6OGU3OTplNzA3OmMzYzEiLCJuYW1lIjoiWWFkYXYsIEdvcGFsIiwib2lkIjoiMjUwMjRjMTAtNGY3Mi00MmI4LTgyYzItOGI1NDg5N2NkMWM3IiwicHVpZCI6IjEwMDMyMDAwOEVBRkE3NDgiLCJwd2RfZXhwIjoiNDI5NTQ1IiwicHdkX3VybCI6Imh0dHBzOi8vcG9ydGFsLm1pY3Jvc29mdG9ubGluZS5jb20vQ2hhbmdlUGFzc3dvcmQuYXNweCIsInJoIjoiMC5BVnNBbG1IcVZibHdFVVNTOVFTbFI1SHhJRVpJZjNrQXV0ZFB1a1Bhd2ZqMk1CUDVBSEkuIiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoiUHRUdnVRSjhqa2pjcjlCODlKNHQtUXlWYTFBMXNHVTNrbWd5M19YTkpOVSIsInRpZCI6IjU1ZWE2MTk2LTcwYjktNDQxMS05MmY1LTA0YTU0NzkxZjEyMCIsInVuaXF1ZV9uYW1lIjoiZ29wYWwueWFkYXZAc3RyYXRhY2VudC5jb20iLCJ1cG4iOiJnb3BhbC55YWRhdkBzdHJhdGFjZW50LmNvbSIsInV0aSI6Im1NbDk5QTVQdDBtTHZ4ZU1kWDlHQUEiLCJ2ZXIiOiIxLjAiLCJ3aWRzIjpbImI3OWZiZjRkLTNlZjktNDY4OS04MTQzLTc2YjE5NGU4NTUwOSJdLCJ4bXNfY2FlIjoiMSIsInhtc19jYyI6WyJDUDEiXSwieG1zX2ZpbHRlcl9pbmRleCI6WyI5MSJdLCJ4bXNfcmQiOiIwLjQyTGxZQlJpakFZQSIsInhtc19zc20iOiIxIiwieG1zX3RjZHQiOjEzNTQ2NTE0ODF9.NvSWwI9S4hVk1t46QZojLGIFMLgn-nZ2EGWZTC6Qg5-_eRk7CEVi7hl2Ada9wvhMnOgNIx3Iivkt9xypgeiJHjruChjwGE2IXOSyj0qEYJ9OkXAvJfgpQ3SgjSfcnTGQr5w5i3lp5PV1-ETp4bQ-fQp4UvwA1J-Bx-pTu9f2snNc9sTNbPWih7IiKqM-7fvZHX41IyLm40ZPP7rkTYByi4Z2_0hMK4OtRJ_TXQrQ8OQwnXOEOmnnu5tZ2GsWUNtMbPaCYs0d8peHUkb0BhfdJgcUSrEXu54AhFUkaxprlgCDPjQkwPaq-Hi5dTFnvxzcnNg8bX5TrjSSE0rYdgVpQQ" "Content-Type: application/json" -d '{"content": "test"}' https://api.fabric.microsoft.com/v1/workspaces/029ea194-7a2f-492e-8fa9-d1e471195c57/notebooks

        curl --location 'https://api.fabric.microsoft.com/v1/workspaces/029ea194-7a2f-492e-8fa9-d1e471195c57/notebooks' \
        --header 'Content-Type: application/json' \
        --header 'Host: graph.microsoft.com' \
        --header 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCIsImtpZCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCJ9.eyJhdWQiOiJodHRwczovL2FwaS5mYWJyaWMubWljcm9zb2Z0LmNvbSIsImlzcyI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0LzU1ZWE2MTk2LTcwYjktNDQxMS05MmY1LTA0YTU0NzkxZjEyMC8iLCJpYXQiOjE3MTU3MDAxNjYsIm5iZiI6MTcxNTcwMDE2NiwiZXhwIjoxNzE1NzA0NTkxLCJhY2N0IjowLCJhY3IiOiIxIiwiYWlvIjoiQVRRQXkvOFdBQUFBcnZFcElBTy95K0JPSlFGT3RCV2FhOTJCSEwyM0Y1QmZDUXlkQlFDcXNDY1BsaEtLdDRLTy9DTHFVWmVoUUVvTCIsImFtciI6WyJwd2QiXSwiYXBwaWQiOiIxOGZiY2ExNi0yMjI0LTQ1ZjYtODViMC1mN2JmMmIzOWIzZjMiLCJhcHBpZGFjciI6IjAiLCJmYW1pbHlfbmFtZSI6IllhZGF2IiwiZ2l2ZW5fbmFtZSI6IkdvcGFsIiwiaXBhZGRyIjoiMjQwNToyMDE6MzAxNjo4YTFjOjM0ZmQ6OGU3OTplNzA3OmMzYzEiLCJuYW1lIjoiWWFkYXYsIEdvcGFsIiwib2lkIjoiMjUwMjRjMTAtNGY3Mi00MmI4LTgyYzItOGI1NDg5N2NkMWM3IiwicHVpZCI6IjEwMDMyMDAwOEVBRkE3NDgiLCJwd2RfZXhwIjoiNDI3ODU3IiwicHdkX3VybCI6Imh0dHBzOi8vcG9ydGFsLm1pY3Jvc29mdG9ubGluZS5jb20vQ2hhbmdlUGFzc3dvcmQuYXNweCIsInJoIjoiMC5BVnNBbG1IcVZibHdFVVNTOVFTbFI1SHhJQWtBQUFBQUFBQUF3QUFBQUFBQUFBRDVBSEkuIiwic2NwIjoiQXBwLlJlYWQuQWxsIENhcGFjaXR5LlJlYWQuQWxsIENhcGFjaXR5LlJlYWRXcml0ZS5BbGwgQ29udGVudC5DcmVhdGUgRGFzaGJvYXJkLlJlYWQuQWxsIERhc2hib2FyZC5SZWFkV3JpdGUuQWxsIERhdGFmbG93LlJlYWQuQWxsIERhdGFmbG93LlJlYWRXcml0ZS5BbGwgRGF0YXNldC5SZWFkLkFsbCBEYXRhc2V0LlJlYWRXcml0ZS5BbGwgR2F0ZXdheS5SZWFkLkFsbCBHYXRld2F5LlJlYWRXcml0ZS5BbGwgSXRlbS5FeGVjdXRlLkFsbCBJdGVtLlJlYWRXcml0ZS5BbGwgSXRlbS5SZXNoYXJlLkFsbCBPbmVMYWtlLlJlYWQuQWxsIE9uZUxha2UuUmVhZFdyaXRlLkFsbCBQaXBlbGluZS5EZXBsb3kgUGlwZWxpbmUuUmVhZC5BbGwgUGlwZWxpbmUuUmVhZFdyaXRlLkFsbCBSZXBvcnQuUmVhZFdyaXRlLkFsbCBSZXBydC5SZWFkLkFsbCBTdG9yYWdlQWNjb3VudC5SZWFkLkFsbCBTdG9yYWdlQWNjb3VudC5SZWFkV3JpdGUuQWxsIFRlbmFudC5SZWFkLkFsbCBUZW5hbnQuUmVhZFdyaXRlLkFsbCBVc2VyU3RhdGUuUmVhZFdyaXRlLkFsbCBXb3Jrc3BhY2UuR2l0Q29tbWl0LkFsbCBXb3Jrc3BhY2UuR2l0VXBkYXRlLkFsbCBXb3Jrc3BhY2UuUmVhZC5BbGwgV29ya3NwYWNlLlJlYWRXcml0ZS5BbGwiLCJzaWduaW5fc3RhdGUiOlsia21zaSJdLCJzdWIiOiJlaTc2UE5EV1IyNllNN3J1YUxWQWNqN3FyZ3FpYXl1TW1hTTA1N3YxaEdVIiwidGlkIjoiNTVlYTYxOTYtNzBiOS00NDExLTkyZjUtMDRhNTQ3OTFmMTIwIiwidW5pcXVlX25hbWUiOiJnb3BhbC55YWRhdkBzdHJhdGFjZW50LmNvbSIsInVwbiI6ImdvcGFsLnlhZGF2QHN0cmF0YWNlbnQuY29tIiwidXRpIjoiMXJnMm5wVm14RXk1Q2VQSnZ6a19BQSIsInZlciI6IjEuMCIsIndpZHMiOlsiYjc5ZmJmNGQtM2VmOS00Njg5LTgxNDMtNzZiMTk0ZTg1NTA5Il0sInhtc19wbCI6ImVuLVVTIn0.f-K5gJQCJ7vHu4PRiVEPXRI1flkD7SOdKAkLqJVpWMeMWEGA9wFqkC4fkuiCrICUf5GOJANh8XPrmy6B1eoEg424DJDSK_fTiKQGUGar5VTv_j0-GjSetEPqZE2o5BoqEDV0Z6HZgtBtOtro9vbad_u1yneVzj2gHWQHaQUhs3pmzEs4laTvEqL2s3K7kC9JBlDZtOY9TE-Dbay0oOtMHw4HqGDolvg9b661ulskZEmgEL2L-UB6p9eo4wKp73mSt77l-pXiE-wOUJ9dtL0yBamfT8s8mm_L6CQXEbLUFu_pBFSY1juT7V7wl0v5pdXnXk7sOCnAVQeS3TI1bJ5uIw' \
        --data '{
          "displayName":"test_sp2",
          "description":"test desc" }'
      
