name: Fabric API Call

on:
  push:
    branches:
      - main

jobs:
  call_api:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Make API Call.
      env:
        FABRIC_API_TOKEN: ${{ secrets.AZURE_CREDENTIALS }}
      run: |
        # Replace 'YOUR_API_ENDPOINT' with the actual Fabric API endpoint
        # Replace 'YOUR_REQUEST_BODY' with the request body if needed
        #curl --http1.1 -X POST -H "Authorization: Bearer $FABRIC_API_TOKEN" -H "Content-Type: application/json" -d 'notebook trial' 'https://api.fabric.microsoft.com/v1/workspaces/0fde94f2-391e-42c0-bc8c-f29f17cac5f6/notebooks'
        #curl --http1.1 -H "Authorization: Bearer $FABRIC_API_TOKEN" "https://api.fabric.microsoft.com/v1/workspaces/0fde94f2-391e-42c0-bc8c-f29f17cac5f6/notebooks" | jq '.'
        curl -X POST -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCIsImtpZCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC81NWVhNjE5Ni03MGI5LTQ0MTEtOTJmNS0wNGE1NDc5MWYxMjAvIiwiaWF0IjoxNzE1Njc0OTQ2LCJuYmYiOjE3MTU2NzQ5NDYsImV4cCI6MTcxNTY4MDU3NSwiYWNyIjoiMSIsImFpbyI6IkFUUUF5LzhXQUFBQUhDalEwYUwrTDAva1prZHFITjRrZVRsZDRZVkVOMmVJSldsVE43VnA2TFBWL0Vwd2MyMldURHE2RmdmbHkwZjYiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiMTk1MGEyNTgtMjI3Yi00ZTMxLWE5Y2YtNzE3NDk1OTQ1ZmMyIiwiYXBwaWRhY3IiOiIwIiwiZmFtaWx5X25hbWUiOiJZYWRhdiIsImdpdmVuX25hbWUiOiJHb3BhbCIsImdyb3VwcyI6WyI4ODhmOTUwOS00MjdjLTQ3ZDItODlkNy0zNzQ3OGZhNmYyMDgiLCIzYTMyMDY2Ni0yYjMxLTQ1MmMtOTlmNS0zNDg5YjU4Nzc0MWYiLCI3NWFlZjliZS1hYThjLTQyOWMtYTM5ZC0xNzc5NzkxZTk3OGQiXSwiaWR0eXAiOiJ1c2VyIiwiaXBhZGRyIjoiMjQwNToyMDE6MzAxNjo4YTFjOmE0OWQ6Y2YzMjpkMWIyOjMzOGUiLCJuYW1lIjoiWWFkYXYsIEdvcGFsIiwib2lkIjoiMjUwMjRjMTAtNGY3Mi00MmI4LTgyYzItOGI1NDg5N2NkMWM3IiwicHVpZCI6IjEwMDMyMDAwOEVBRkE3NDgiLCJwd2RfZXhwIjoiNDUzMDc3IiwicHdkX3VybCI6Imh0dHBzOi8vcG9ydGFsLm1pY3Jvc29mdG9ubGluZS5jb20vQ2hhbmdlUGFzc3dvcmQuYXNweCIsInJoIjoiMC5BVnNBbG1IcVZibHdFVVNTOVFTbFI1SHhJRVpJZjNrQXV0ZFB1a1Bhd2ZqMk1CUDVBSEkuIiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoiUHRUdnVRSjhqa2pjcjlCODlKNHQtUXlWYTFBMXNHVTNrbWd5M19YTkpOVSIsInRpZCI6IjU1ZWE2MTk2LTcwYjktNDQxMS05MmY1LTA0YTU0NzkxZjEyMCIsInVuaXF1ZV9uYW1lIjoiZ29wYWwueWFkYXZAc3RyYXRhY2VudC5jb20iLCJ1cG4iOiJnb3BhbC55YWRhdkBzdHJhdGFjZW50LmNvbSIsInV0aSI6IklmSHFYMVlnbmt1ZmxzbGhFY2N3QUEiLCJ2ZXIiOiIxLjAiLCJ3aWRzIjpbImI3OWZiZjRkLTNlZjktNDY4OS04MTQzLTc2YjE5NGU4NTUwOSJdLCJ4bXNfY2FlIjoiMSIsInhtc19jYyI6WyJDUDEiXSwieG1zX2ZpbHRlcl9pbmRleCI6WyI5MSJdLCJ4bXNfcmQiOiIwLjQyTGxZQlJpakFZQSIsInhtc19zc20iOiIxIiwieG1zX3RjZHQiOjEzNTQ2NTE0ODF9.b7u956IZQcpNVjZi9ZLFxEPkOR32ObKw6xo-5ID6uHr1iMQO3uACLMuc1jVuKFH2hpplGpmEn01n35xCoTfpOLRM5zT2Zoy9DwxtNaUx1kjcTCI50VpvHQJMOBE_7hDbg72UYpvZ2TCsegxhCHkuM6yipoNq0E5WCSRxajvlkeVSZhWuPJGNS_DgaULZD_bOT0EcEQuUxWyQR4jKa5RnwC_8Sx9ISMs7PP3uURgQhis3y4tBVxhQnfIsKo7CuGiYwFSXyUy6GMWbfV7GeswHjTXiJfh2DhDcqj1Gvcqm54u1994Q3Gy-JGgx8yUNWD7dHyduaYDewrGkiCjpYBf9iQ" -H "Content-Type: application/json" -d '{"content": "test"}' https://api.fabric.microsoft.com/v1/workspaces/0fde94f2-391e-42c0-bc8c-f29f17cac5f6/notebooks
